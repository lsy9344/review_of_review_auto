# 네이버 스마트플레이스 리뷰 자동답변 시스템 구현 계획

## 현재 상태
- ✅ 리뷰 크롤링 기능 완료 (상위 10개 리뷰 수집)
- ✅ 기본 UI 구조 완성
- ⚠️ OpenAI API 연동은 placeholder 상태
- ⚠️ 답변 제출 기능은 placeholder 상태

## 구현할 기능

### Phase 1: OpenAI API 연동
1. **`app/infra/llm_openai.py` 실제 구현**
   - OpenAI Python SDK 사용
   - API 키 환경변수 또는 설정에서 로드
   - 에러 처리 및 재시도 로직

2. **`app/domain/prompts.py` 개선**
   - 리뷰 답변 생성용 프롬프트 템플릿
   - 비즈니스 톤/스타일별 프롬프트 변형

### Phase 2: 답변 생성 시스템
3. **`app/services/reply_generator.py` 구현**
   - 크롤링된 리뷰 배열을 받아서 각각에 대한 답변 생성
   - OpenAI API 호출 및 응답 처리
   - 배치 처리 및 진행상황 추적

### Phase 3: 답변 제출 기능
4. **네이버 스마트플레이스 답변 제출 방법 조사 및 구현**
   - GraphQL API를 통한 답변 제출 가능성 우선 조사
   - API가 없으면 브라우저 자동화(Selenium/Playwright) 사용
   - `app/services/submitter.py`에서 실제 제출 로직 구현

### Phase 4: UI 통합
5. **메인 워크플로우에 답변 생성/제출 단계 추가**
   - 리뷰 크롤링 완료 후 자동으로 답변 생성 시작
   - 생성된 답변들을 사용자에게 표시하는 UI
   - 사용자가 답변을 검토/수정할 수 있는 기능
   - 답변 제출 진행상황 표시

### Phase 5: 설정 및 최종 마무리
6. **설정 관리 개선**
   - OpenAI API 키 설정
   - 프롬프트 템플릿 커스터마이징
   - 답변 톤/길이 등 설정 옵션

7. **에러 처리 및 로깅**
   - API 호출 실패 처리
   - 답변 제출 실패 시 재시도 로직
   - 상세한 로깅 및 사용자 피드백

## 기술적 고려사항
- **OpenAI API**: `gpt-4o-mini` 또는 `gpt-4` 사용 (api 비용이 가장 저렴한 모델 사용)
- **답변 제출**: GraphQL API 우선, 없으면 웹 자동화
- **UI**: 기존 PySide6 구조 활용
- **에러 처리**: 각 단계별 적절한 fallback 및 재시도

## 예상 소요시간
- Phase 1-2: 2-3시간 (OpenAI 연동 및 답변 생성)
- Phase 3: 3-4시간 (답변 제출 기능, API 조사 포함)
- Phase 4-5: 2-3시간 (UI 통합 및 마무리)

총 예상 시간: 7-10시간

## 구현 순서
1. OpenAI API 클라이언트 구현 및 테스트
2. 프롬프트 시스템 개선
3. 답변 생성 서비스 구현
4. 네이버 답변 제출 방법 조사 및 구현
5. 기존 UI에 새로운 워크플로우 통합
6. 설정 관리 및 에러 처리 완성
7. 전체 시스템 테스트 및 최적화